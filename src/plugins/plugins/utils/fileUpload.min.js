"use strict";(function(a,e,c){var d=function(){var f=a.createElement("div");return(("draggable" in f)||("ondragstart" in f&&"ondrop" in f))&&"FormData" in e&&"FileReader" in e}();var b=a.querySelectorAll(".box");Array.prototype.forEach.call(b,function(g){var l=g.querySelector('input[type="file"]'),k=g.querySelector("#label"),i=g.querySelector(".box__error span"),n=g.querySelectorAll(".box__restart"),f=false,j=function(o){k.textContent=o.length>1?(l.getAttribute("data-multiple-caption")||"").replace("{count}",o.length):o[0].name},m=function(){var o=a.createEvent("HTMLEvents");o.initEvent("submit",true,false);g.dispatchEvent(o)};var h=a.createElement("input");h.setAttribute("type","hidden");h.setAttribute("name","ajax");h.setAttribute("value",1);g.appendChild(h);l.addEventListener("change",function(o){j(o.target.files);m()});if(d){g.classList.add("has-advanced-upload");["drag","dragstart","dragend","dragover","dragenter","dragleave","drop"].forEach(function(o){g.addEventListener(o,function(p){p.preventDefault();p.stopPropagation()})});["dragover","dragenter"].forEach(function(o){g.addEventListener(o,function(){g.classList.add("is-dragover")})});["dragleave","dragend","drop"].forEach(function(o){g.addEventListener(o,function(){g.classList.remove("is-dragover")})});g.addEventListener("drop",function(o){f=o.dataTransfer.files;j(f);m()})}g.addEventListener("submit",function(r){if(g.classList.contains("is-uploading")){return false}g.classList.add("is-uploading");g.classList.remove("is-error");if(d){r.preventDefault();var o=new FormData(g);if(f){Array.prototype.forEach.call(f,function(t){o.append(l.getAttribute("name"),t)})}var q=new XMLHttpRequest();q.open(g.getAttribute("method"),g.getAttribute("action"),true);q.onload=function(){g.classList.remove("is-uploading");if(q.status>=200&&q.status<400){var t=JSON.parse(q.responseText);g.classList.add(t.success==true?"is-success":"is-error");if(!t.success){i.textContent=t.error}let bedroomId=a.getElementById("bedroomId").value;setTimeout(function(){e.location.href=domain+"/admin/bedrooms/edit/"+bedroomId},delay)}else{alert("Error. Please, contact the webmaster!")}};q.onerror=function(){g.classList.remove("is-uploading");alert("Error. Please, try again!")};q.send(o)}else{var s="uploadiframe"+new Date().getTime(),p=a.createElement("iframe");$iframe=$('<iframe name="'+s+'" style="display: none;"></iframe>');p.setAttribute("name",s);p.style.display="none";a.body.appendChild(p);g.setAttribute("target",s);p.addEventListener("load",function(){var t=JSON.parse(p.contentDocument.body.innerHTML);g.classList.remove("is-uploading");g.classList.add(t.success==true?"is-success":"is-error");g.removeAttribute("target");if(!t.success){i.textContent=t.error}p.parentNode.removeChild(p)})}});Array.prototype.forEach.call(n,function(o){o.addEventListener("click",function(p){p.preventDefault();g.classList.remove("is-error","is-success");l.click()})});l.addEventListener("focus",function(){l.classList.add("has-focus")});l.addEventListener("blur",function(){l.classList.remove("has-focus")})})}(document,window,0));